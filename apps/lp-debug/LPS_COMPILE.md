# lps-compile

Convert LPS (LightPlayer Script) source code to LPA (LightPlayer Assembly) format.

## Usage

```bash
# Read from stdin, write to stdout
echo "return xNorm;" | lps-compile

# Read from file, write to stdout
lps-compile script.lps

# Read from file, write to file
lps-compile script.lps output.lpa
```

## Example

Input (`demo.lps`):

```glsl
float wave(float dist, float angle) {
    return smoothstep(0.0, 0.4, fract(dist + angle));
}

return wave(centerDist, centerAngle);
```

Output (`demo.lpa`):

```assembly
; LPA Assembly - script
; Generated by lps-compile

function float main() {
  0000  load builtin.centerDist
  0001  load builtin.centerAngle
  0002  call wave
  0003  return
}

function float wave(float dist, float angle) {
  ; Locals:
  ;   float dist
  ;   float angle

  0000  store local.angle
  0001  store local.dist
  0002  push 0.0
  0003  push 0.4
  0004  load local.dist
  0005  load local.angle
  0006  add
  0007  fract
  0008  smoothstep
  0009  return
}
```

## Building

```bash
cargo build --package lp-debug --bin lps-compile --release
```

Binary location: `./target/release/lps-compile`
